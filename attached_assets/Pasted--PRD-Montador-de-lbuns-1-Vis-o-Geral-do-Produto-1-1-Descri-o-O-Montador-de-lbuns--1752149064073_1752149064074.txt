# PRD - Montador de Álbuns

## 1. Visão Geral do Produto

### 1.1 Descrição
O **Montador de Álbuns** é uma aplicação web moderna para criação, edição e exportação de álbuns de fotos digitais. O sistema permite aos usuários organizar suas fotos em layouts profissionais, com funcionalidades de drag-and-drop, múltiplos templates e exportação em alta qualidade.

### 1.2 Objetivos do Produto
- Simplificar o processo de criação de álbuns de fotos digitais
- Oferecer interface intuitiva com funcionalidades profissionais
- Permitir criação individual ou em lote de múltiplos álbuns
- Fornecer diferentes planos de assinatura para diversos perfis de usuários
- Garantir alta qualidade na exportação dos álbuns

### 1.3 Público-Alvo
- **Primário**: Fotógrafos profissionais e semi-profissionais
- **Secundário**: Usuários domésticos que desejam criar álbuns personalizados
- **Terciário**: Estúdios fotográficos e empresas de eventos

## 2. Funcionalidades Principais

### 2.1 Sistema de Autenticação
- **Login/Registro**: Email e senha
- **Gerenciamento de Sessão**: NextAuth.js com tokens seguros
- **Perfis de Usuário**: Informações pessoais e preferências
- **Planos de Assinatura**: FREE, PRO, PREMIUM

### 2.2 Criação de Álbuns

#### 2.2.1 Criação Individual
- Definição de nome, tamanho e orientação do álbum
- Upload de fotos via drag-and-drop
- Suporte a múltiplos formatos de imagem
- Validação automática de arquivos

#### 2.2.2 Criação Múltipla (PRO+)
- Upload de pastas organizadas por álbum
- Processamento em lote com sistema de filas
- Monitoramento de progresso em tempo real
- Criação automática de múltiplos álbuns simultaneamente

### 2.3 Editor de Álbuns

#### 2.3.1 Interface Principal
- **Galeria de Fotos**: Visualização de todas as fotos do álbum
- **Editor de Slides**: Interface drag-and-drop para organização
- **Navegação**: Controles para alternar entre slides
- **Preview**: Modo de visualização do resultado final

#### 2.3.2 Layouts e Templates
- Múltiplos layouts automáticos baseados no número de fotos
- Templates responsivos para diferentes orientações
- Personalização de posicionamento das fotos
- Sistema de grid flexível

#### 2.3.3 Funcionalidades Avançadas
- Auto-save com debounce para evitar perda de dados
- Sistema de feedback inteligente sobre progresso
- Navegação entre álbuns de um mesmo lote
- Controle de qualidade de imagens

### 2.4 Sistema de Exportação

#### 2.4.1 Formatos Disponíveis
- **JPG Individual**: Exportação slide por slide
- **ZIP**: Pacote completo do álbum (PRO+)
- **Qualidade Configurável**: 72 DPI (FREE), 150 DPI (PRO+)

#### 2.4.2 Processamento
- Renderização usando html2canvas
- Compressão otimizada de imagens
- Download automático ou manual
- Marca d'água para plano FREE

### 2.5 Dashboard e Gerenciamento

#### 2.5.1 Painel Principal
- Visão geral dos álbuns criados
- Estatísticas de uso e limites do plano
- Acesso rápido às funcionalidades principais
- Histórico de atividades

#### 2.5.2 Gerenciamento de Álbuns
- Listagem com filtros e busca
- Visualização em grid ou lista
- Operações em lote (editar, excluir, exportar)
- Organização por data e categorias

## 3. Arquitetura Técnica

### 3.1 Stack Tecnológico
- **Frontend**: Next.js 14, React 18, TypeScript
- **Styling**: Tailwind CSS
- **Autenticação**: NextAuth.js
- **Banco de Dados**: PostgreSQL com Prisma ORM
- **Upload**: react-dropzone, processamento paralelo
- **Drag & Drop**: @dnd-kit
- **Exportação**: html2canvas, JSZip
- **Estado**: Zustand

### 3.2 Estrutura do Banco de Dados

#### 3.2.1 Principais Entidades
- **User**: Usuários do sistema com planos e autenticação
- **Album**: Álbuns com metadados e relacionamentos
- **Photo**: Fotos individuais com ordem e caminhos
- **Slide**: Slides com layouts e configurações
- **AlbumJob**: Jobs de processamento assíncrono

#### 3.2.2 Relacionamentos
- User 1:N Album (um usuário pode ter múltiplos álbuns)
- Album 1:N Photo (um álbum pode ter múltiplas fotos)
- Album 1:N Slide (um álbum pode ter múltiplos slides)
- User 1:N AlbumJob (controle de jobs por usuário)

### 3.3 APIs e Serviços

#### 3.3.1 APIs REST
- `/api/auth/*`: Autenticação e sessões
- `/api/albums/*`: CRUD de álbuns
- `/api/upload/*`: Upload de arquivos
- `/api/jobs/*`: Monitoramento de jobs
- `/api/user/*`: Gerenciamento de usuários

#### 3.3.2 Serviços Internos
- **AlbumQueue**: Sistema de filas para processamento
- **ParallelUpload**: Upload paralelo otimizado
- **Cache**: Sistema de cache para performance
- **Validation**: Validação de arquivos e dados

## 4. Planos e Limitações

### 4.1 Comparativo de Planos

| Recurso | FREE | PRO | PREMIUM |
|---------|------|-----|----------|
| Álbuns simultâneos | 1 | 10 | Ilimitado |
| Criação múltipla | ❌ | ✅ | ✅ |
| Qualidade exportação | 72 DPI | 150 DPI | 150 DPI |
| Marca d'água | ✅ | ❌ | ❌ |
| Exportação ZIP | ❌ | ✅ | ✅ |
| Suporte prioritário | ❌ | ✅ | ✅ |
| Armazenamento | 1GB | 10GB | 100GB |

### 4.2 Limitações Técnicas
- **Tamanho máximo por foto**: 10MB
- **Formatos suportados**: JPG, PNG, WEBP
- **Processamento simultâneo**: 3 jobs por vez
- **Timeout de upload**: 30 segundos por arquivo

## 5. Fluxos de Usuário

### 5.1 Fluxo de Criação Individual
1. Login/Registro no sistema
2. Acesso ao dashboard
3. Clique em "Criar Álbum Único"
4. Definição de nome, tamanho e orientação
5. Upload de fotos via drag-and-drop
6. Criação automática do álbum
7. Redirecionamento para o editor

### 5.2 Fluxo de Edição
1. Seleção do álbum no dashboard
2. Abertura do editor
3. Organização das fotos nos slides
4. Ajuste de layouts conforme necessário
5. Preview do resultado
6. Salvamento automático das alterações

### 5.3 Fluxo de Exportação
1. Clique em "Exportar" no editor
2. Seleção do formato (JPG/ZIP)
3. Configuração de qualidade
4. Processamento em background
5. Download automático ou manual

### 5.4 Fluxo de Criação Múltipla (PRO+)
1. Acesso à funcionalidade de criação múltipla
2. Upload de pastas organizadas
3. Configuração global de tamanho/orientação
4. Criação de jobs em lote
5. Monitoramento de progresso
6. Acesso aos álbuns criados

## 6. Requisitos Não-Funcionais

### 6.1 Performance
- **Tempo de carregamento**: < 3 segundos para páginas principais
- **Upload paralelo**: Até 5 arquivos simultâneos
- **Processamento**: Jobs processados em até 5 minutos
- **Responsividade**: Interface fluida em dispositivos móveis

### 6.2 Segurança
- **Autenticação**: Tokens JWT seguros
- **Autorização**: Controle de acesso por usuário
- **Upload**: Validação rigorosa de tipos de arquivo
- **Dados**: Criptografia em trânsito e repouso

### 6.3 Escalabilidade
- **Usuários simultâneos**: Suporte a 1000+ usuários
- **Armazenamento**: Sistema de arquivos escalável
- **Processamento**: Filas assíncronas para jobs
- **Cache**: Sistema de cache para otimização

### 6.4 Usabilidade
- **Interface intuitiva**: Drag-and-drop nativo
- **Feedback visual**: Indicadores de progresso claros
- **Responsividade**: Adaptação a diferentes telas
- **Acessibilidade**: Conformidade com WCAG 2.1

## 7. Roadmap e Evoluções

### 7.1 Versão Atual (v1.0)
- ✅ Sistema de autenticação completo
- ✅ Criação individual e múltipla de álbuns
- ✅ Editor com drag-and-drop
- ✅ Exportação em JPG e ZIP
- ✅ Sistema de planos

## 8. Métricas e KPIs

### 8.1 Métricas de Produto
- **Usuários ativos mensais (MAU)**
- **Taxa de conversão FREE → PRO/PREMIUM**
- **Número de álbuns criados por usuário**
- **Tempo médio de criação de álbum**
- **Taxa de retenção de usuários**

### 8.2 Métricas Técnicas
- **Tempo de resposta das APIs**
- **Taxa de sucesso de uploads**
- **Disponibilidade do sistema (uptime)**
- **Uso de recursos (CPU, memória, storage)**
- **Taxa de erro em jobs de processamento**

### 8.3 Métricas de Negócio
- **Receita recorrente mensal (MRR)**
- **Custo de aquisição de cliente (CAC)**
- **Valor do tempo de vida do cliente (LTV)**
- **Taxa de churn por plano**
- **Margem de contribuição por usuário**

## 9. Considerações de Implementação

### 9.1 Ambiente de Desenvolvimento
- **Controle de versão**: Git com GitFlow
- **CI/CD**: Integração contínua com testes automatizados
- **Ambientes**: Development, Staging, Production
- **Monitoramento**: Logs estruturados e alertas

### 9.2 Deploy e Infraestrutura
- **Hospedagem**: Vercel para frontend e APIs
- **Banco de dados**: PostgreSQL gerenciado
- **Storage**: Sistema de arquivos escalável
- **CDN**: Distribuição global de assets

### 9.3 Manutenção e Suporte
- **Documentação**: Técnica e de usuário atualizada
- **Testes**: Cobertura > 80% do código
- **Backup**: Rotinas automáticas diárias
- **Suporte**: Sistema de tickets integrado

---

**Documento criado em**: Janeiro 2024  
**Versão**: 1.0  
**Próxima revisão**: Março 2024